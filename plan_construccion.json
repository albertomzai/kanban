{
  "api_contract": {
    "recurso_principal": "/api/tasks",
    "descripcion": "API RESTful para la gestión completa de tareas del tablero Kanban, soportando operaciones CRUD y persistencia en archivo JSON.",
    "metodos_soportados": [
      {
        "metodo": "GET",
        "accion": "Listar todas las tareas.",
        "respuesta": {
          "tipo": "Array<Object>",
          "contenido": "Lista de objetos tarea."
        }
      },
      {
        "metodo": "POST",
        "accion": "Crear una nueva tarea.",
        "parametros": {
          "content": "string (contenido de la tarea)",
          "state": "string (estado inicial, por defecto 'Por Hacer')"
        },
        "respuesta": {
          "tipo": "Object",
          "contenido": "Objeto tarea creado con ID asignado."
        }
      },
      {
        "metodo": "PUT",
        "accion": "Actualizar tarea (contenido o estado).",
        "parametros_ruta": "<id>",
        "parametros_body": {
          "content": "string (opcional)",
          "state": "string (opcional, valores válidos: 'Por Hacer', 'En Progreso', 'Hecho')"
        },
        "respuesta": {
          "tipo": "Object",
          "contenido": "Objeto tarea actualizado."
        }
      },
      {
        "metodo": "DELETE",
        "accion": "Eliminar una tarea.",
        "parametros_ruta": "<id>",
        "respuesta": {
          "tipo": "Object",
          "contenido": "Mensaje de confirmación de eliminación."
        }
      }
    ],
    "esquema_de_datos_tarea": {
      "id": "integer",
      "content": "string",
      "state": "string (Valores permitidos: 'Por Hacer', 'En Progreso', 'Hecho')"
    }
  },
  "contrato_qa_e2e": {
    "columna_por_hacer": "column-por-hacer",
    "columna_en_progreso": "column-en-progreso",
    "columna_hecho": "column-hecho",
    "input_nueva_tarea": "input-new-task",
    "boton_agregar_tarea": "btn-add-task",
    "tarjeta_tarea": "task-card",
    "boton_eliminar_tarea": "btn-delete-task",
    "area_texto_editable": "task-content"
  },
  "plan": [
    {
      "etapa": "backend",
      "tareas": [
        "Inicializar la estructura del proyecto Flask creando el directorio `backend/` y el fichero `__init__.py`.",
        "Implementar una función auxiliar `load_tasks()` para leer el archivo `tasks.json` y manejar el caso de archivo no encontrado retornando una lista vacía.",
        "Implementar una función auxiliar `save_tasks(tasks)` para serializar y escribir la lista de tareas en `tasks.json` de forma segura.",
        "Definir el Blueprint `kanban_bp` en `backend/routes.py` para encapsular las rutas de la API.",
        "Configurar el endpoint GET `/api/tasks` para leer las tareas usando `load_tasks()` y retornarlas como JSON.",
        "Configurar el endpoint POST `/api/tasks` para recibir `content` y `state`, generar un ID único, añadir la tarea y guardar con `save_tasks()`.",
        "Configurar el endpoint PUT `/api/tasks/<id>` para buscar la tarea por ID, actualizar sus campos y persistir los cambios con `save_tasks()`.",
        "Configurar el endpoint DELETE `/api/tasks/<id>` para filtrar y eliminar la tarea por ID, guardando el estado resultante en `tasks.json`.",
        "En `backend/__init__.py`, crear la `create_app()` que registre el Blueprint `kanban_bp` y configure la carpeta `static_folder` apuntando a '../frontend'.",
        "Crear el fichero `app.py` en la raíz para instanciar y ejecutar la aplicación Flask en modo depuración.",
        "Crear el archivo `requirements.txt` listando las dependencias 'Flask' y 'pytest'.",
        "Configurar `pytest.ini` para establecer el path de Python correcto para las pruebas.",
        "Crear el directorio `tests/` y el fichero `test_backend.py` con casos de prueba unitarios para cada endpoint de la API usando el cliente de prueba de Flask."
      ]
    },
    {
      "etapa": "frontend",
      "tareas": [
        "Crear el archivo `frontend/index.html` con una estructura semántica que incluya un contenedor principal y tres secciones `div` para las columnas del Kanban.",
        "Implementar en `index.html` el formulario para añadir tareas en la columna 'Por Hacer', compuesto por un input de texto y un botón.",
        "Añadir estilos CSS en `index.html` utilizando Flexbox o Grid para distribuir las tres columnas horizontalmente y dar estilo a las tarjetas de tareas.",
        "Escribir una función JavaScript `fetchTasks()` que realice una petición GET a `/api/tasks` al cargar la página y renderice las tarjetas en las columnas correspondientes según su estado.",
        "Implementar la lógica para añadir tareas: capturar el evento 'submit' del formulario, enviar una petición POST a `/api/tasks` y actualizar el DOM.",
        "Implementar la funcionalidad de edición: permitir hacer clic en el texto de una tarjeta para cambiarlo a un campo `contenteditable` o `prompt`, enviando el cambio vía PUT.",
        "Implementar la funcionalidad de arrastrar y soltar (Drag and Drop) usando la API HTML5 nativa: añadir atributos `draggable` a las tarjetas y manejar eventos `dragstart`, `dragover` y `drop`.",
        "En el evento `drop`, identificar la columna de destino y realizar una petición PUT a `/api/tasks/<id>` actualizando el estado de la tarea.",
        "Implementar un botón de eliminar en cada tarjeta que, al ser pulsado, envíe una petición DELETE a `/api/tasks/<id>` y elimine el elemento del DOM tras la confirmación.",
        "Asegurar que todas las operaciones asíncronas incluyan un manejo básico de errores mediante `console.error` o alertas visuales en el DOM."
      ]
    },
    {
      "etapa": "e2e",
      "tareas": [
        "Instalar y configurar Cypress en el proyecto siguiendo la documentación oficial para pruebas E2E.",
        "Crear el fichero de configuración `cypress.config.js` para apuntar al servidor de desarrollo local.",
        "Escribir una prueba en `cypress/e2e/kanban.cy.js` que verifique la carga inicial del tablero y la existencia de las tres columnas.",
        "Escribir una prueba que simule la creación de una nueva tarea: escribir en el input, pulsar el botón de agregar y verificar que la tarjeta aparece en la columna 'Por Hacer'.",
        "Escribir una prueba que simule el movimiento de una tarea: arrastrar una tarjeta desde 'Por Hacer' hasta 'En Progreso' y verificar mediante la API o el UI que el estado ha cambiado.",
        "Escribir una prueba que simule la eliminación de una tarea: pulsar el botón de eliminar y confirmar que la tarjeta ya no está visible en el tablero."
      ]
    }
  ]
}